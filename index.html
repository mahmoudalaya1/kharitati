<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>خريطتي</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Leaflet CSS -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Leaflet Geocoder (بحث) -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"
/>
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

<style>
body, html {
  margin: 0;
  height: 100%;
  font-family: Arial;
}

#map {
  height: 100vh;
  width: 100%;
}

#controls {
  position: absolute;
  top: 10px;
  left: 10px;
  background: white;
  padding: 10px;
  border-radius: 8px;
  z-index: 999;
  width: 220px;
}

button {
  width: 100%;
  margin-top: 6px;
  padding: 8px;
  border: none;
  background: #1976d2;
  color: white;
  border-radius: 6px;
  cursor: pointer;
}
</style>
</head>

<body>

<div id="controls">
  <button onclick="toggleTerrain()">تضاريس</button>
  <button onclick="rotateMap()">تدوير</button>
  <button onclick="logout()">تسجيل خروج</button>
</div>

<div id="map"></div>

<script>
/* إنشاء الخريطة */
const map = L.map('map', {
  zoomControl: true
}).setView([36.2021, 37.1343], 13); // حلب

/* الطبقة العادية */
const normalLayer = L.tileLayer(
  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
  { attribution: '© OpenStreetMap' }
).addTo(map);

/* طبقة التضاريس */
const terrainLayer = L.tileLayer(
  'https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png',
  { attribution: '© OpenTopoMap' }
);

let terrainOn = false;

/* بحث */
L.Control.geocoder({
  defaultMarkGeocode: true
}).addTo(map);

/* تبديل التضاريس */
function toggleTerrain() {
  if (!terrainOn) {
    map.removeLayer(normalLayer);
    map.addLayer(terrainLayer);
  } else {
    map.removeLayer(terrainLayer);
    map.addLayer(normalLayer);
  }
  terrainOn = !terrainOn;
}

/* تدوير (محاكاة) */
let angle = 0;
function rotateMap() {
  angle += 15;
  document.getElementById("map").style.transform =
    `rotate(${angle}deg)`;
}

/* تسجيل خروج */
function logout() {
  alert("تم تسجيل الخروج");
  location.reload();
}
</script>

</body>
</html>

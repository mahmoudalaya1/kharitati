<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Kharitati Maps</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
html,body{
  margin:0;
  padding:0;
  height:100%;
  overflow:hidden;
  font-family:Arial
}
#map{
  position:fixed;
  inset:0;
}

/* Search */
#searchBar{
  position:fixed;
  top:12px;
  left:50%;
  transform:translateX(-50%);
  width:92%;
  max-width:460px;
  background:white;
  padding:12px 16px;
  border-radius:30px;
  box-shadow:0 4px 12px rgba(0,0,0,.3);
  z-index:1000
}
#searchBar input{
  width:100%;
  border:none;
  outline:none;
  font-size:16px
}

/* Bottom bar */
#bottom{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  background:white;
  border-radius:22px 22px 0 0;
  box-shadow:0 -4px 20px rgba(0,0,0,.3);
  padding:10px;
  z-index:1000
}
#info{
  text-align:center;
  font-size:14px;
  margin-bottom:6px
}
#bottom .row{
  display:flex;
  justify-content:space-around
}
#bottom button{
  background:none;
  border:none;
  font-size:22px;
  cursor:pointer
}
.active{
  color:#1976d2;
  font-weight:bold;
}
</style>
</head>

<body>

<div id="map"></div>

<div id="searchBar">
  <input placeholder="Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù„ØªØ­Ø¯ÙŠØ¯ ÙˆØ¬Ù‡Ø©">
</div>

<div id="bottom">
  <div id="info">Ø§Ø®ØªØ± ÙˆØ¶Ø¹ Ø§Ù„ØªÙ†Ù‚Ù„ Ø«Ù… Ø§Ø¶ØºØ· â–¶ï¸</div>
  <div class="row">
    <button id="carBtn" onclick="setMode('car')">ğŸš—</button>
    <button id="walkBtn" onclick="setMode('pedestrian')">ğŸš¶â€â™‚ï¸</button>
    <button id="bikeBtn" onclick="setMode('bicycle')">ğŸš´</button>
    <button onclick="startNav()">â–¶ï¸</button>
  </div>
</div>

<script>
/* ===== HERE KEY ===== */
const HERE_API_KEY = "PUT_YOUR_API_KEY_HERE";

/* ===== MAP ===== */
const map = L.map("map").setView([41.05, 28.98], 14);

L.tileLayer(
  "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
  {maxZoom:19}
).addTo(map);

/* ===== STATE ===== */
let start=null;
let end=null;
let startMarker=null;
let endMarker=null;
let routeLine=null;
let mode="pedestrian"; // Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù…Ø´ÙŠ

setMode("pedestrian");

/* ===== GPS ===== */
navigator.geolocation.getCurrentPosition(
  p=>{
    start=[p.coords.latitude,p.coords.longitude];
    startMarker=L.marker(start).addTo(map);
    map.setView(start,16);
  },
  ()=>alert("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹"),
  {enableHighAccuracy:true}
);

/* ===== SET MODE ===== */
function setMode(m){
  mode=m;
  document.getElementById("carBtn").classList.remove("active");
  document.getElementById("walkBtn").classList.remove("active");
  document.getElementById("bikeBtn").classList.remove("active");

  if(m==="car") carBtn.classList.add("active");
  if(m==="pedestrian") walkBtn.classList.add("active");
  if(m==="bicycle
